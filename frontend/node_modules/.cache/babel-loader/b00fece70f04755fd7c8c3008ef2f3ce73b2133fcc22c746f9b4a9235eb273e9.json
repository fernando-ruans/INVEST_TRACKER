{"ast":null,"code":"import React,{useEffect,useRef,memo,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Converter símbolos brasileiros para formato TradingView\nconst formatSymbolForTradingView=inputSymbol=>{const cleanSymbol=inputSymbol.trim().toUpperCase();const symbolMap={'IBOVESPA':'BMFBOVESPA:IBOV','IFIX':'BMFBOVESPA:IFIX','SMLL':'BMFBOVESPA:SMLL','IDIV':'BMFBOVESPA:IDIV','BOVA11':'BMFBOVESPA:BOVA11','PETR4':'BMFBOVESPA:PETR4','VALE3':'BMFBOVESPA:VALE3','ITUB4':'BMFBOVESPA:ITUB4','BBDC4':'BMFBOVESPA:BBDC4','GC=F':'COMEX:GC1!','SI=F':'COMEX:SI1!','PL=F':'NYMEX:PL1!','PA=F':'NYMEX:PA1!','CL=F':'NYMEX:CL1!','BZ=F':'ICE:BRN1!','NG=F':'NYMEX:NG1!','HG=F':'COMEX:HG1!','ZC=F':'CBOT:ZC1!','ZS=F':'CBOT:ZS1!','ZW=F':'CBOT:ZW1!','KC=F':'ICEUS:KC1!','SB=F':'ICEUS:SB1!','CC=F':'ICEUS:CC1!','CT=F':'ICEUS:CT1!','OJ=F':'ICEUS:OJ1!','LBS=F':'CME:LBS1!','BTC-USD':'BINANCE:BTCUSDT','ETH-USD':'BINANCE:ETHUSDT','BNB-USD':'BINANCE:BNBUSDT','ADA-USD':'BINANCE:ADAUSDT','SOL-USD':'BINANCE:SOLUSDT','XRP-USD':'BINANCE:XRPUSDT','DOT-USD':'BINANCE:DOTUSDT','DOGE-USD':'BINANCE:DOGEUSDT','AVAX-USD':'BINANCE:AVAXUSDT','MATIC-USD':'BINANCE:MATICUSDT','EURUSD=X':'FX:EURUSD','GBPUSD=X':'FX:GBPUSD','USDJPY=X':'FX:USDJPY','USDCAD=X':'FX:USDCAD','AUDUSD=X':'FX:AUDUSD','USDBRL=X':'FX:USDBRL','EURBRL=X':'FX:EURBRL','^GSPC':'SP:SPX','^DJI':'DJ:DJI','^IXIC':'NASDAQ:IXIC','^FTSE':'FTSE:UKX','^GDAXI':'XETR:DAX','^N225':'TVC:NI225','^HSI':'HSI:HSI','^TNX':'TVC:TNX','^FVX':'TVC:FVX','^IRX':'TVC:IRX','^TYX':'TVC:TYX','USDCHF=X':'FX:USDCHF','NZDUSD=X':'FX:NZDUSD','EURJPY=X':'FX:EURJPY','GBPJPY=X':'FX:GBPJPY','EURGBP=X':'FX:EURGBP','WDO=F':'BMFBOVESPA:WDO1!','DOL=F':'BMFBOVESPA:DOL1!','WIN=F':'BMFBOVESPA:WIN1!','IND=F':'BMFBOVESPA:IND1!','BGI=F':'BMFBOVESPA:BGI1!','CCM=F':'BMFBOVESPA:CCM1!','ICF=F':'BMFBOVESPA:ICF1!','DI1=F':'BMFBOVESPA:DI11!'};if(cleanSymbol.includes(':'))return cleanSymbol;if(symbolMap[cleanSymbol])return symbolMap[cleanSymbol];if(cleanSymbol.endsWith('.SA'))return\"BMFBOVESPA:\".concat(cleanSymbol.replace('.SA',''));if(cleanSymbol.match(/^[A-Z]{4}[0-9]{1,2}$/))return\"BMFBOVESPA:\".concat(cleanSymbol);return cleanSymbol;};const TradingViewChart=_ref=>{let{symbol,width='100%',height=400,interval='D',theme='light',style='1',locale='pt_BR',timezone='America/Sao_Paulo',toolbar_bg='#f1f3f6',enable_publishing=false,withdateranges=true,hide_side_toolbar=false,allow_symbol_change=true,save_image=false,className='',fullscreen=false}=_ref;const[isFullscreen,setIsFullscreen]=useState(false);const containerRef=useRef(null);const scriptRef=useRef(null);const widgetRef=useRef(null);useEffect(()=>{// Limpar widget anterior se existir\nif(widgetRef.current){try{widgetRef.current.remove();}catch(error){console.warn('Erro ao remover widget anterior:',error);}}// Limpar container\nif(containerRef.current){containerRef.current.innerHTML='';}// Função para criar o widget\nconst createWidget=()=>{if(!containerRef.current||!window.TradingView){console.warn('TradingView não disponível ou container não encontrado');return;}try{// Aguardar um pouco para garantir que o DOM está pronto\nsetTimeout(()=>{if(!containerRef.current)return;const config={autosize:true,symbol:symbol,interval:interval,timezone:timezone,theme:theme,style:style,locale:locale,toolbar_bg:toolbar_bg,enable_publishing:enable_publishing,withdateranges:withdateranges,hide_side_toolbar:hide_side_toolbar,allow_symbol_change:allow_symbol_change,save_image:save_image,container_id:containerRef.current.id,width:isFullscreen?'100vw':width,height:isFullscreen?'100vh':height,fullscreen:isFullscreen};widgetRef.current=new window.TradingView.widget(config);},100);}catch(error){console.error('Erro ao criar widget TradingView:',error);// Mostrar mensagem de erro no container\nif(containerRef.current){containerRef.current.innerHTML=\"\\n            <div style=\\\"display: flex; align-items: center; justify-content: center; height: 100%; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px;\\\">\\n              <div style=\\\"text-align: center; color: #6c757d;\\\">\\n                <div style=\\\"font-size: 24px; margin-bottom: 8px;\\\">\\uD83D\\uDCCA</div>\\n                <div>Gr\\xE1fico indispon\\xEDvel</div>\\n                <div style=\\\"font-size: 12px; margin-top: 4px;\\\">Erro ao carregar TradingView</div>\\n              </div>\\n            </div>\\n          \";}}};// Verificar se o script do TradingView já foi carregado\nif(window.TradingView){createWidget();}else{// Verificar se já existe um script sendo carregado\nconst existingScript=document.querySelector('script[src=\"https://s3.tradingview.com/tv.js\"]');if(existingScript){// Script já existe, aguardar carregamento\nexistingScript.addEventListener('load',createWidget);}else{// Carregar script do TradingView\nconst script=document.createElement('script');script.src='https://s3.tradingview.com/tv.js';script.async=true;script.onload=createWidget;script.onerror=()=>{console.error('Erro ao carregar script do TradingView');// Mostrar mensagem de erro\nif(containerRef.current){containerRef.current.innerHTML=\"\\n              <div style=\\\"display: flex; align-items: center; justify-content: center; height: 100%; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px;\\\">\\n                <div style=\\\"text-align: center; color: #6c757d;\\\">\\n                  <div style=\\\"font-size: 24px; margin-bottom: 8px;\\\">\\u26A0\\uFE0F</div>\\n                  <div>Erro de conex\\xE3o</div>\\n                  <div style=\\\"font-size: 12px; margin-top: 4px;\\\">N\\xE3o foi poss\\xEDvel carregar o TradingView</div>\\n                </div>\\n              </div>\\n            \";}};document.head.appendChild(script);scriptRef.current=script;}}// Cleanup\nreturn()=>{if(widgetRef.current){try{widgetRef.current.remove();}catch(error){console.warn('Erro ao limpar widget:',error);}}};},[symbol,interval,theme,style,width,height,isFullscreen]);// Gerar ID único para o container\nconst containerId=\"tradingview_\".concat(symbol.replace(/[^a-zA-Z0-9]/g,'_'),\"_\").concat(Date.now());return/*#__PURE__*/_jsxs(\"div\",{className:\"tradingview-widget-container \".concat(className),style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsFullscreen(prev=>!prev),style:{position:'absolute',top:10,right:10,zIndex:10,background:'#fff',border:'1px solid #ccc',borderRadius:4,padding:'4px 8px',cursor:'pointer'},children:isFullscreen?'Sair do Fullscreen':'Fullscreen'}),/*#__PURE__*/_jsx(\"div\",{ref:containerRef,id:containerId,className:\"tradingview-widget\",style:{width:isFullscreen?'100vw':typeof width==='number'?\"\".concat(width,\"px\"):width,height:isFullscreen?'100vh':typeof height==='number'?\"\".concat(height,\"px\"):height,background:'#fff',borderRadius:8}}),/*#__PURE__*/_jsx(\"div\",{className:\"tradingview-widget-copyright\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://www.tradingview.com/symbols/\".concat(symbol,\"/\"),rel:\"noopener nofollow\",target:\"_blank\",className:\"text-xs text-gray-500 hover:text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"blue-text\",children:symbol}),\" por TradingView\"]})})]});};// Componente simplificado para gráfico básico\nexport const SimpleTradingViewChart=_ref2=>{let{symbol,height=300,theme='light'}=_ref2;// Validação do símbolo\nif(!symbol||symbol.trim()===''){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg\",style:{height},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-4\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"S\\xEDmbolo inv\\xE1lido\"})]})});}const formattedSymbol=formatSymbolForTradingView(symbol);return/*#__PURE__*/_jsx(TradingViewChart,{symbol:formattedSymbol,height:height,theme:theme,hide_side_toolbar:true,withdateranges:false,allow_symbol_change:false,save_image:false,enable_publishing:false});};// Componente para gráfico avançado\nexport const AdvancedTradingViewChart=_ref3=>{let{symbol,height=520,theme='light',interval='D'}=_ref3;// Tenta formatar o símbolo, se falhar usa um alternativo\nconst formattedSymbol=formatSymbolForTradingView(symbol);// Alternativa: se símbolo não funcionar, usar BTCUSDT\nconst fallbackSymbol='BINANCE:BTCUSDT';return/*#__PURE__*/_jsx(TradingViewChart,{symbol:formattedSymbol||fallbackSymbol,height:height,theme:theme,interval:interval,hide_side_toolbar:false,withdateranges:true,allow_symbol_change:true,save_image:true,enable_publishing:false});};// Componente para mini gráfico\nexport const MiniTradingViewChart=_ref4=>{let{symbol,width=300,height=200,theme='light'}=_ref4;return/*#__PURE__*/_jsx(TradingViewChart,{symbol:symbol,width:width,height:height,theme:theme,hide_side_toolbar:true,withdateranges:false,allow_symbol_change:false,save_image:false,enable_publishing:false,style:\"2\"// Área\n});};// Declaração de tipos para o TradingView\nexport default/*#__PURE__*/memo(TradingViewChart);","map":{"version":3,"names":["React","useEffect","useRef","memo","useState","jsx","_jsx","jsxs","_jsxs","formatSymbolForTradingView","inputSymbol","cleanSymbol","trim","toUpperCase","symbolMap","includes","endsWith","concat","replace","match","TradingViewChart","_ref","symbol","width","height","interval","theme","style","locale","timezone","toolbar_bg","enable_publishing","withdateranges","hide_side_toolbar","allow_symbol_change","save_image","className","fullscreen","isFullscreen","setIsFullscreen","containerRef","scriptRef","widgetRef","current","remove","error","console","warn","innerHTML","createWidget","window","TradingView","setTimeout","config","autosize","container_id","id","widget","existingScript","document","querySelector","addEventListener","script","createElement","src","async","onload","onerror","head","appendChild","containerId","Date","now","position","children","onClick","prev","top","right","zIndex","background","border","borderRadius","padding","cursor","ref","href","rel","target","SimpleTradingViewChart","_ref2","formattedSymbol","AdvancedTradingViewChart","_ref3","fallbackSymbol","MiniTradingViewChart","_ref4"],"sources":["C:/Users/ferna/INVEST_TRACKER/frontend/src/components/TradingViewChart.tsx"],"sourcesContent":["import React, { useEffect, useRef, memo, useState } from 'react';\r\nimport { TradingViewConfig } from '../types';\r\nimport TradingViewWidget from 'react-tradingview-widget';\r\n\r\n// Converter símbolos brasileiros para formato TradingView\r\nconst formatSymbolForTradingView = (inputSymbol: string): string => {\r\n  const cleanSymbol = inputSymbol.trim().toUpperCase();\r\n  const symbolMap: { [key: string]: string } = {\r\n    'IBOVESPA': 'BMFBOVESPA:IBOV',\r\n    'IFIX': 'BMFBOVESPA:IFIX',\r\n    'SMLL': 'BMFBOVESPA:SMLL',\r\n    'IDIV': 'BMFBOVESPA:IDIV',\r\n    'BOVA11': 'BMFBOVESPA:BOVA11',\r\n    'PETR4': 'BMFBOVESPA:PETR4',\r\n    'VALE3': 'BMFBOVESPA:VALE3',\r\n    'ITUB4': 'BMFBOVESPA:ITUB4',\r\n    'BBDC4': 'BMFBOVESPA:BBDC4',\r\n    'GC=F': 'COMEX:GC1!',\r\n    'SI=F': 'COMEX:SI1!',\r\n    'PL=F': 'NYMEX:PL1!',\r\n    'PA=F': 'NYMEX:PA1!',\r\n    'CL=F': 'NYMEX:CL1!',\r\n    'BZ=F': 'ICE:BRN1!',\r\n    'NG=F': 'NYMEX:NG1!',\r\n    'HG=F': 'COMEX:HG1!',\r\n    'ZC=F': 'CBOT:ZC1!',\r\n    'ZS=F': 'CBOT:ZS1!',\r\n    'ZW=F': 'CBOT:ZW1!',\r\n    'KC=F': 'ICEUS:KC1!',\r\n    'SB=F': 'ICEUS:SB1!',\r\n    'CC=F': 'ICEUS:CC1!',\r\n    'CT=F': 'ICEUS:CT1!',\r\n    'OJ=F': 'ICEUS:OJ1!',\r\n    'LBS=F': 'CME:LBS1!',\r\n    'BTC-USD': 'BINANCE:BTCUSDT',\r\n    'ETH-USD': 'BINANCE:ETHUSDT',\r\n    'BNB-USD': 'BINANCE:BNBUSDT',\r\n    'ADA-USD': 'BINANCE:ADAUSDT',\r\n    'SOL-USD': 'BINANCE:SOLUSDT',\r\n    'XRP-USD': 'BINANCE:XRPUSDT',\r\n    'DOT-USD': 'BINANCE:DOTUSDT',\r\n    'DOGE-USD': 'BINANCE:DOGEUSDT',\r\n    'AVAX-USD': 'BINANCE:AVAXUSDT',\r\n    'MATIC-USD': 'BINANCE:MATICUSDT',\r\n    'EURUSD=X': 'FX:EURUSD',\r\n    'GBPUSD=X': 'FX:GBPUSD',\r\n    'USDJPY=X': 'FX:USDJPY',\r\n    'USDCAD=X': 'FX:USDCAD',\r\n    'AUDUSD=X': 'FX:AUDUSD',\r\n    'USDBRL=X': 'FX:USDBRL',\r\n    'EURBRL=X': 'FX:EURBRL',\r\n    '^GSPC': 'SP:SPX',\r\n    '^DJI': 'DJ:DJI',\r\n    '^IXIC': 'NASDAQ:IXIC',\r\n    '^FTSE': 'FTSE:UKX',\r\n    '^GDAXI': 'XETR:DAX',\r\n    '^N225': 'TVC:NI225',\r\n    '^HSI': 'HSI:HSI',\r\n    '^TNX': 'TVC:TNX',\r\n    '^FVX': 'TVC:FVX',\r\n    '^IRX': 'TVC:IRX',\r\n    '^TYX': 'TVC:TYX',\r\n    'USDCHF=X': 'FX:USDCHF',\r\n    'NZDUSD=X': 'FX:NZDUSD',\r\n    'EURJPY=X': 'FX:EURJPY',\r\n    'GBPJPY=X': 'FX:GBPJPY',\r\n    'EURGBP=X': 'FX:EURGBP',\r\n    'WDO=F': 'BMFBOVESPA:WDO1!',\r\n    'DOL=F': 'BMFBOVESPA:DOL1!',\r\n    'WIN=F': 'BMFBOVESPA:WIN1!',\r\n    'IND=F': 'BMFBOVESPA:IND1!',\r\n    'BGI=F': 'BMFBOVESPA:BGI1!',\r\n    'CCM=F': 'BMFBOVESPA:CCM1!',\r\n    'ICF=F': 'BMFBOVESPA:ICF1!',\r\n    'DI1=F': 'BMFBOVESPA:DI11!'\r\n  };\r\n  if (cleanSymbol.includes(':')) return cleanSymbol;\r\n  if (symbolMap[cleanSymbol]) return symbolMap[cleanSymbol];\r\n  if (cleanSymbol.endsWith('.SA')) return `BMFBOVESPA:${cleanSymbol.replace('.SA', '')}`;\r\n  if (cleanSymbol.match(/^[A-Z]{4}[0-9]{1,2}$/)) return `BMFBOVESPA:${cleanSymbol}`;\r\n  return cleanSymbol;\r\n};\r\n\r\ninterface TradingViewChartProps {\r\n  symbol: string;\r\n  width?: string | number;\r\n  height?: string | number;\r\n  interval?: string;\r\n  theme?: 'light' | 'dark';\r\n  style?: string;\r\n  locale?: string;\r\n  timezone?: string;\r\n  toolbar_bg?: string;\r\n  enable_publishing?: boolean;\r\n  withdateranges?: boolean;\r\n  hide_side_toolbar?: boolean;\r\n  allow_symbol_change?: boolean;\r\n  save_image?: boolean;\r\n  className?: string;\r\n  fullscreen?: boolean;\r\n}\r\n\r\nconst TradingViewChart: React.FC<TradingViewChartProps> = ({\r\n  symbol,\r\n  width = '100%',\r\n  height = 400,\r\n  interval = 'D',\r\n  theme = 'light',\r\n  style = '1',\r\n  locale = 'pt_BR',\r\n  timezone = 'America/Sao_Paulo',\r\n  toolbar_bg = '#f1f3f6',\r\n  enable_publishing = false,\r\n  withdateranges = true,\r\n  hide_side_toolbar = false,\r\n  allow_symbol_change = true,\r\n  save_image = false,\r\n  className = '',\r\n  fullscreen = false,\r\n}) => {\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const scriptRef = useRef<HTMLScriptElement | null>(null);\r\n  const widgetRef = useRef<any>(null);\r\n\r\n  useEffect(() => {\r\n    // Limpar widget anterior se existir\r\n    if (widgetRef.current) {\r\n      try {\r\n        widgetRef.current.remove();\r\n      } catch (error) {\r\n        console.warn('Erro ao remover widget anterior:', error);\r\n      }\r\n    }\r\n\r\n    // Limpar container\r\n    if (containerRef.current) {\r\n      containerRef.current.innerHTML = '';\r\n    }\r\n\r\n    // Função para criar o widget\r\n    const createWidget = () => {\r\n      if (!containerRef.current || !window.TradingView) {\r\n        console.warn('TradingView não disponível ou container não encontrado');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Aguardar um pouco para garantir que o DOM está pronto\r\n        setTimeout(() => {\r\n          if (!containerRef.current) return;\r\n          \r\n          const config = {\r\n            autosize: true,\r\n            symbol: symbol,\r\n            interval: interval,\r\n            timezone: timezone,\r\n            theme: theme,\r\n            style: style,\r\n            locale: locale,\r\n            toolbar_bg: toolbar_bg,\r\n            enable_publishing: enable_publishing,\r\n            withdateranges: withdateranges,\r\n            hide_side_toolbar: hide_side_toolbar,\r\n            allow_symbol_change: allow_symbol_change,\r\n            save_image: save_image,\r\n            container_id: containerRef.current.id,\r\n            width: isFullscreen ? '100vw' : width,\r\n            height: isFullscreen ? '100vh' : height,\r\n            fullscreen: isFullscreen,\r\n          };\r\n\r\n          widgetRef.current = new window.TradingView.widget(config);\r\n        }, 100);\r\n      } catch (error) {\r\n        console.error('Erro ao criar widget TradingView:', error);\r\n        // Mostrar mensagem de erro no container\r\n        if (containerRef.current) {\r\n          containerRef.current.innerHTML = `\r\n            <div style=\"display: flex; align-items: center; justify-content: center; height: 100%; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px;\">\r\n              <div style=\"text-align: center; color: #6c757d;\">\r\n                <div style=\"font-size: 24px; margin-bottom: 8px;\">📊</div>\r\n                <div>Gráfico indisponível</div>\r\n                <div style=\"font-size: 12px; margin-top: 4px;\">Erro ao carregar TradingView</div>\r\n              </div>\r\n            </div>\r\n          `;\r\n        }\r\n      }\r\n    };\r\n\r\n    // Verificar se o script do TradingView já foi carregado\r\n    if (window.TradingView) {\r\n      createWidget();\r\n    } else {\r\n      // Verificar se já existe um script sendo carregado\r\n      const existingScript = document.querySelector('script[src=\"https://s3.tradingview.com/tv.js\"]');\r\n      \r\n      if (existingScript) {\r\n        // Script já existe, aguardar carregamento\r\n        existingScript.addEventListener('load', createWidget);\r\n      } else {\r\n        // Carregar script do TradingView\r\n        const script = document.createElement('script');\r\n        script.src = 'https://s3.tradingview.com/tv.js';\r\n        script.async = true;\r\n        script.onload = createWidget;\r\n        script.onerror = () => {\r\n          console.error('Erro ao carregar script do TradingView');\r\n          // Mostrar mensagem de erro\r\n          if (containerRef.current) {\r\n            containerRef.current.innerHTML = `\r\n              <div style=\"display: flex; align-items: center; justify-content: center; height: 100%; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px;\">\r\n                <div style=\"text-align: center; color: #6c757d;\">\r\n                  <div style=\"font-size: 24px; margin-bottom: 8px;\">⚠️</div>\r\n                  <div>Erro de conexão</div>\r\n                  <div style=\"font-size: 12px; margin-top: 4px;\">Não foi possível carregar o TradingView</div>\r\n                </div>\r\n              </div>\r\n            `;\r\n          }\r\n        };\r\n        \r\n        document.head.appendChild(script);\r\n        scriptRef.current = script;\r\n      }\r\n    }\r\n\r\n    // Cleanup\r\n    return () => {\r\n      if (widgetRef.current) {\r\n        try {\r\n          widgetRef.current.remove();\r\n        } catch (error) {\r\n          console.warn('Erro ao limpar widget:', error);\r\n        }\r\n      }\r\n    };\r\n  }, [symbol, interval, theme, style, width, height, isFullscreen]);\r\n\r\n  // Gerar ID único para o container\r\n  const containerId = `tradingview_${symbol.replace(/[^a-zA-Z0-9]/g, '_')}_${Date.now()}`;\r\n\r\n  return (\r\n    <div className={`tradingview-widget-container ${className}`} style={{ position: 'relative' }}>\r\n      <button\r\n        onClick={() => setIsFullscreen((prev) => !prev)}\r\n        style={{\r\n          position: 'absolute',\r\n          top: 10,\r\n          right: 10,\r\n          zIndex: 10,\r\n          background: '#fff',\r\n          border: '1px solid #ccc',\r\n          borderRadius: 4,\r\n          padding: '4px 8px',\r\n          cursor: 'pointer',\r\n        }}\r\n      >\r\n        {isFullscreen ? 'Sair do Fullscreen' : 'Fullscreen'}\r\n      </button>\r\n      <div\r\n        ref={containerRef}\r\n        id={containerId}\r\n        className=\"tradingview-widget\"\r\n        style={{\r\n          width: isFullscreen ? '100vw' : (typeof width === 'number' ? `${width}px` : width),\r\n          height: isFullscreen ? '100vh' : (typeof height === 'number' ? `${height}px` : height),\r\n          background: '#fff',\r\n          borderRadius: 8,\r\n        }}\r\n      />\r\n      <div className=\"tradingview-widget-copyright\">\r\n        <a\r\n          href={`https://www.tradingview.com/symbols/${symbol}/`}\r\n          rel=\"noopener nofollow\"\r\n          target=\"_blank\"\r\n          className=\"text-xs text-gray-500 hover:text-gray-700\"\r\n        >\r\n          <span className=\"blue-text\">{symbol}</span> por TradingView\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente simplificado para gráfico básico\r\nexport const SimpleTradingViewChart: React.FC<{\r\n  symbol: string;\r\n  height?: number;\r\n  theme?: 'light' | 'dark';\r\n}> = ({ symbol, height = 300, theme = 'light' }) => {\r\n  // Validação do símbolo\r\n  if (!symbol || symbol.trim() === '') {\r\n    return (\r\n      <div className=\"flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg\" style={{ height }}>\r\n        <div className=\"text-center\">\r\n          <div className=\"text-4xl mb-4\">📊</div>\r\n          <p className=\"text-gray-500\">Símbolo inválido</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formattedSymbol = formatSymbolForTradingView(symbol);\r\n\r\n  return (\r\n    <TradingViewChart\r\n      symbol={formattedSymbol}\r\n      height={height}\r\n      theme={theme}\r\n      hide_side_toolbar={true}\r\n      withdateranges={false}\r\n      allow_symbol_change={false}\r\n      save_image={false}\r\n      enable_publishing={false}\r\n    />\r\n  );\r\n}\r\n\r\n// Componente para gráfico avançado\r\nexport const AdvancedTradingViewChart: React.FC<{\r\n  symbol: string;\r\n  height?: number;\r\n  theme?: 'light' | 'dark';\r\n  interval?: string;\r\n}> = ({ symbol, height = 520, theme = 'light', interval = 'D' }) => {\r\n  // Tenta formatar o símbolo, se falhar usa um alternativo\r\n  const formattedSymbol = formatSymbolForTradingView(symbol);\r\n  // Alternativa: se símbolo não funcionar, usar BTCUSDT\r\n  const fallbackSymbol = 'BINANCE:BTCUSDT';\r\n  return (\r\n    <TradingViewChart\r\n      symbol={formattedSymbol || fallbackSymbol}\r\n      height={height}\r\n      theme={theme}\r\n      interval={interval}\r\n      hide_side_toolbar={false}\r\n      withdateranges={true}\r\n      allow_symbol_change={true}\r\n      save_image={true}\r\n      enable_publishing={false}\r\n    />\r\n  );\r\n};\r\n\r\n// Componente para mini gráfico\r\nexport const MiniTradingViewChart: React.FC<{\r\n  symbol: string;\r\n  width?: number;\r\n  height?: number;\r\n  theme?: 'light' | 'dark';\r\n}> = ({ symbol, width = 300, height = 200, theme = 'light' }) => {\r\n  return (\r\n    <TradingViewChart\r\n      symbol={symbol}\r\n      width={width}\r\n      height={height}\r\n      theme={theme}\r\n      hide_side_toolbar={true}\r\n      withdateranges={false}\r\n      allow_symbol_change={false}\r\n      save_image={false}\r\n      enable_publishing={false}\r\n      style=\"2\" // Área\r\n    />\r\n  );\r\n};\r\n\r\n// Declaração de tipos para o TradingView\r\ndeclare global {\r\n  interface Window {\r\n    TradingView: {\r\n      widget: new (config: TradingViewConfig) => any;\r\n    };\r\n  }\r\n}\r\n\r\nexport default memo(TradingViewChart);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}