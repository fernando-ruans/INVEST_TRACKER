{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{useTheme}from'../contexts/ThemeContext';// Hook para detectar o tamanho da tela\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useWindowSize=()=>{const[windowSize,setWindowSize]=useState({width:window.innerWidth,height:window.innerHeight});useEffect(()=>{const handleResize=()=>{setWindowSize({width:window.innerWidth,height:window.innerHeight});};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);return windowSize;};const InvestingCalendarWidget=_ref=>{let{width='100%',height,theme,timeZone='America/Sao_Paulo',timeSpan='thisWeek',showCountries=['BR','US','EU','GB','CN','JP'],importanceLevel=3,className=''}=_ref;const{theme:contextTheme}=useTheme();const currentTheme=theme||contextTheme;const{width:screenWidth}=useWindowSize();// Calcula a altura responsiva se não for fornecida\nconst responsiveHeight=height||(screenWidth<640?400:screenWidth<768?500:screenWidth<1024?600:800);// URL do widget econômico do TradingView\n// Usando o widget oficial em vez do iframe direto para evitar problemas de X-Frame-Options\nconst widgetId=\"tradingview-widget-\".concat(Math.random().toString(36).substring(2,15));// Configuração do widget\nconst widgetConfig={\"colorTheme\":currentTheme==='dark'?'dark':'light',\"isTransparent\":false,\"width\":\"100%\",\"height\":\"100%\",\"locale\":\"pt\",\"importanceFilter\":importanceLevel.toString(),\"currencyFilter\":\"USD,EUR,BRL,GBP,CNY,JPY\"};// Configuração em formato de string para o script\nconst widgetConfigString=JSON.stringify(widgetConfig);// Referência para o contêiner do widget\nconst containerRef=useRef(null);useEffect(()=>{// Limpar qualquer conteúdo anterior\nif(containerRef.current){containerRef.current.innerHTML='';}// Criar a estrutura do widget\nconst widgetContainer=document.createElement('div');widgetContainer.className='tradingview-widget-container';widgetContainer.id=widgetId;const widgetDiv=document.createElement('div');widgetDiv.className='tradingview-widget-container__widget';// Criar o script do TradingView\nconst script=document.createElement('script');script.src='https://s3.tradingview.com/external-embedding/embed-widget-events.js';script.async=true;script.innerHTML=widgetConfigString;// Montar a estrutura\nwidgetContainer.appendChild(widgetDiv);widgetContainer.appendChild(script);// Adicionar ao DOM\nif(containerRef.current){containerRef.current.appendChild(widgetContainer);}// Limpar ao desmontar\nreturn()=>{if(containerRef.current){containerRef.current.innerHTML='';}};},[widgetId,widgetConfigString]);return/*#__PURE__*/_jsxs(\"div\",{className:\"investing-calendar-widget-container \".concat(className),style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{ref:containerRef,className:\"investing-calendar-widget\",style:{width:typeof width==='number'?\"\".concat(width,\"px\"):width,height:typeof responsiveHeight==='number'?\"\".concat(responsiveHeight,\"px\"):responsiveHeight,background:contextTheme==='dark'?'#1f2937':'#fff',borderRadius:8,minHeight:screenWidth<640?300:400,overflow:'hidden'}}),/*#__PURE__*/_jsx(\"div\",{className:\"investing-widget-copyright\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.tradingview.com/economic-calendar/\",rel:\"noopener nofollow\",target:\"_blank\",className:\"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300\",children:\"Calend\\xE1rio Econ\\xF4mico por TradingView\"})})]});};export default InvestingCalendarWidget;","map":{"version":3,"names":["React","useEffect","useRef","useState","useTheme","jsx","_jsx","jsxs","_jsxs","useWindowSize","windowSize","setWindowSize","width","window","innerWidth","height","innerHeight","handleResize","addEventListener","removeEventListener","InvestingCalendarWidget","_ref","theme","timeZone","timeSpan","showCountries","importanceLevel","className","contextTheme","currentTheme","screenWidth","responsiveHeight","widgetId","concat","Math","random","toString","substring","widgetConfig","widgetConfigString","JSON","stringify","containerRef","current","innerHTML","widgetContainer","document","createElement","id","widgetDiv","script","src","async","appendChild","style","position","children","ref","background","borderRadius","minHeight","overflow","href","rel","target"],"sources":["C:/Users/ferna/INVEST_TRACKER/frontend/src/components/InvestingCalendarWidget.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\n\r\n// Hook para detectar o tamanho da tela\r\nconst useWindowSize = () => {\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowSize;\r\n};\r\n\r\ninterface InvestingCalendarWidgetProps {\r\n  width?: string | number;\r\n  height?: string | number;\r\n  theme?: 'light' | 'dark';\r\n  timeZone?: string;\r\n  timeSpan?: 'today' | 'tomorrow' | 'thisWeek' | 'nextWeek';\r\n  showCountries?: string[];\r\n  importanceLevel?: 1 | 2 | 3; // 1 = low, 2 = medium, 3 = high\r\n  className?: string;\r\n}\r\n\r\nconst InvestingCalendarWidget: React.FC<InvestingCalendarWidgetProps> = ({\r\n  width = '100%',\r\n  height,\r\n  theme,\r\n  timeZone = 'America/Sao_Paulo',\r\n  timeSpan = 'thisWeek',\r\n  showCountries = ['BR', 'US', 'EU', 'GB', 'CN', 'JP'],\r\n  importanceLevel = 3,\r\n  className = '',\r\n}) => {\r\n  const { theme: contextTheme } = useTheme();\r\n  const currentTheme = theme || contextTheme;\r\n  const { width: screenWidth } = useWindowSize();\r\n  \r\n  // Calcula a altura responsiva se não for fornecida\r\n  const responsiveHeight = height || (screenWidth < 640 ? 400 : \r\n                                     screenWidth < 768 ? 500 : \r\n                                     screenWidth < 1024 ? 600 : 800);\r\n  \r\n  // URL do widget econômico do TradingView\r\n  // Usando o widget oficial em vez do iframe direto para evitar problemas de X-Frame-Options\r\n  const widgetId = `tradingview-widget-${Math.random().toString(36).substring(2, 15)}`;\r\n  \r\n  // Configuração do widget\r\n  const widgetConfig = {\r\n    \"colorTheme\": currentTheme === 'dark' ? 'dark' : 'light',\r\n    \"isTransparent\": false,\r\n    \"width\": \"100%\",\r\n    \"height\": \"100%\",\r\n    \"locale\": \"pt\",\r\n    \"importanceFilter\": importanceLevel.toString(),\r\n    \"currencyFilter\": \"USD,EUR,BRL,GBP,CNY,JPY\"\r\n  };\r\n  \r\n  // Configuração em formato de string para o script\r\n  const widgetConfigString = JSON.stringify(widgetConfig);\r\n\r\n\r\n  // Referência para o contêiner do widget\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    // Limpar qualquer conteúdo anterior\r\n    if (containerRef.current) {\r\n      containerRef.current.innerHTML = '';\r\n    }\r\n\r\n    // Criar a estrutura do widget\r\n    const widgetContainer = document.createElement('div');\r\n    widgetContainer.className = 'tradingview-widget-container';\r\n    widgetContainer.id = widgetId;\r\n\r\n    const widgetDiv = document.createElement('div');\r\n    widgetDiv.className = 'tradingview-widget-container__widget';\r\n\r\n    // Criar o script do TradingView\r\n    const script = document.createElement('script');\r\n    script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-events.js';\r\n    script.async = true;\r\n    script.innerHTML = widgetConfigString;\r\n\r\n    // Montar a estrutura\r\n    widgetContainer.appendChild(widgetDiv);\r\n    widgetContainer.appendChild(script);\r\n\r\n    // Adicionar ao DOM\r\n    if (containerRef.current) {\r\n      containerRef.current.appendChild(widgetContainer);\r\n    }\r\n\r\n    // Limpar ao desmontar\r\n    return () => {\r\n      if (containerRef.current) {\r\n        containerRef.current.innerHTML = '';\r\n      }\r\n    };\r\n  }, [widgetId, widgetConfigString]);\r\n\r\n  return (\r\n    <div className={`investing-calendar-widget-container ${className}`} style={{ position: 'relative' }}>\r\n      <div\r\n        ref={containerRef}\r\n        className=\"investing-calendar-widget\"\r\n        style={{\r\n          width: typeof width === 'number' ? `${width}px` : width,\r\n          height: typeof responsiveHeight === 'number' ? `${responsiveHeight}px` : responsiveHeight,\r\n          background: contextTheme === 'dark' ? '#1f2937' : '#fff',\r\n          borderRadius: 8,\r\n          minHeight: screenWidth < 640 ? 300 : 400,\r\n          overflow: 'hidden',\r\n        }}\r\n      />\r\n      <div className=\"investing-widget-copyright\">\r\n        <a\r\n          href=\"https://www.tradingview.com/economic-calendar/\"\r\n          rel=\"noopener nofollow\"\r\n          target=\"_blank\"\r\n          className=\"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300\"\r\n        >\r\n          Calendário Econômico por TradingView\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvestingCalendarWidget;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}